<!doctype html>
<style>
    div {
        font-family: menlo;
        line-height: 50px;
    }

    i {
        background-image: url(moo.svg);
        background-size: 1.4em 1.4em;
        width: 1.4em;
        height: 1.4em;
        display: inline-block;
    }

    .foo {
        opacity: 0;
        transition-duration: 600ms;
    }
</style>
<script src="../node_modules/jquery/dist/jquery.min.js"></script>
<script src="../node_modules/capsid/dist/capsid.min.js"></script>
<script src="../node_modules/capsid/dist/capsid-jquery.min.js"></script>
<script src="../puncher.js"></script>
<script>

    $(function () {
        setTimeout(function () {
            document.querySelector('.puncher').dispatchEvent(new CustomEvent('puncher.start', { bubbles: true }))
        }, 500)
    })

    class Foo {

        __init__ () {
            this.$el.on('puncher.appended', () => this.punched())
        }

        punched() {
            setTimeout(() => {
                this.$el.css('opacity', 1);
            }, 100)
        }
    }

    capsid.def('foo', Foo)

</script>

<div class="puncher" unit-dur="150">
    Hello, world <i class="foo"></i><br />
    Hello, world <i class="foo"></i><i class="foo"></i><i class="foo"></i><i class="foo"></i><i class="foo"></i><br />
    Hello, world <i class="foo"></i> <i class="foo"></i> <i class="foo"></i> <i class="foo"></i> <i class="foo"></i><br />
    Hello, world <i class="foo"></i><i class="foo"></i><i class="foo"></i><i class="foo"></i><i class="foo"></i><br />
    Hello, world <i class="foo"></i> <i class="foo"></i> <i class="foo"></i> <i class="foo"></i> <i class="foo"></i><br />
    Hello, world <i class="foo"></i><i class="foo"></i><i class="foo"></i><i class="foo"></i><i class="foo"></i><br />
    Hello, world <i class="foo"></i> <i class="foo"></i> <i class="foo"></i> <i class="foo"></i> <i class="foo"></i><br />
    Hello, world <i class="foo"></i><i class="foo"></i><i class="foo"></i><i class="foo"></i><i class="foo"></i><br />
    Hello, world <i class="foo"></i> <i class="foo"></i> <i class="foo"></i> <i class="foo"></i> <i class="foo"></i><br />
</div>
